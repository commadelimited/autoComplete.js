(function(a){a.fn.autocomplete=function(b){b=a.extend({},a.fn.autocomplete.defaults,b);return this.each(function(e,f){var d=a(f);var c=b.target;d.bind("input",function(i){var j=d.val();if(j.length<1){c.html("").listview("refresh")}else{if(j.length>b.minLength){if(a.isArray(b.source)){var h=b.source.sort().filter(function(l,k,n){var m=new RegExp("^"+j,"i");if(a.isPlainObject(l)){element_text=l.label}else{element_text=l}return m.test(element_text)});g(h)}else{a.get(b.source,{term:j},function(k){g(k)},"json")}}}});function g(h){var i=[];a(h).each(function(j,k){if(a.isPlainObject(k)){i.push('<li><a href="'+b.link+k.value+'">'+k.label+"</a></li>")}else{i.push('<li><a href="'+b.link+k+'">'+k+"</a></li>")}});c.html(i.join("")).listview("refresh")}})};a.fn.autocomplete.defaults={target:a(),source:null,link:null,minLength:0}})(jQuery);